import 'package:ecommerce_firebase/modules/screens/profile%20update%20screen/controller/profile_update_controller.dart';import '../../../../utils/all_instance.dart';import '../../../../utils/export.dart';import '../../../../utils/user_collection.dart';class ProfileUpdateScreen extends GetView<ProfileUpdateController> {  const ProfileUpdateScreen({super.key});  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        title: const CommonText(          text: 'Update Profile',        ),        actions: [          IconButton(              onPressed: () {                controller.sendEmailVerificationCode();              },              icon: const Icon(                Icons.update,                color: Colors.red,              ))        ],      ),      body: FutureBuilder<DocumentSnapshot>(        future: Collection.collectionProfile.doc('${Instance.userEmail}').get(),        builder:            (BuildContext context, AsyncSnapshot<DocumentSnapshot> snapshot) {          if (snapshot.hasError) {            return const Text("Something went wrong");          }          if (snapshot.hasData && !snapshot.data!.exists) {            return const Text("Document does not exist");          }          if (snapshot.connectionState == ConnectionState.waiting) {            return Container();          }          Map<String, dynamic> data =              snapshot.data!.data() as Map<String, dynamic>;          controller.nameController.text = data['Name'];          controller.emailController.text = data['Email'];          controller.addressController.text = data['Address'];          controller.mobileController.text = data['Mobile'];          controller.passwordController.text = data['Password'];          return SizedBox(            width: Get.width,            child: SingleChildScrollView(              child: Form(                  key: controller.formKey,                  child: Column(                    children: [                      CircleAvatar(                          backgroundColor: AppColor.kTransparentColor,                          radius: 40,                          child: Image.memory(                              decodeBase64Image('${data['Photo']}'))),                      const SizedBox(height: kSmallSize),                      Column(                        children: [                          CustomTextField(                              readOnly: true,                              controller: controller.emailController,                              validator: validate,                              focusNode: controller.emailFocus,                              onFieldSubmitted: (v) {                                FocusScope.of(context)                                    .requestFocus(controller.nameFocus);                              },                              textInputAction: TextInputAction.next,                              keyboardType: TextInputType.name,                              hintText: AppString.email,                              label: AppString.email,                              suffixIcon: IconButton(                                  onPressed: () {},                                  icon: const Icon(Icons.man))),                          const SizedBox(height: kSmallSize),                          CustomTextField(                            controller: controller.nameController,                            validator: validate,                            focusNode: controller.nameFocus,                            onFieldSubmitted: (v) {                              FocusScope.of(context)                                  .requestFocus(controller.addressFocus);                            },                            textInputAction: TextInputAction.next,                            keyboardType: TextInputType.name,                            hintText: AppString.name,                            label: AppString.name,                            suffixIcon: IconButton(                                onPressed: () {}, icon: const Icon(Icons.man)),                          ),                          const SizedBox(height: kSmallSize),                          CustomTextField(                            controller: controller.addressController,                            validator: validate,                            focusNode: controller.addressFocus,                            onFieldSubmitted: (v) {                              FocusScope.of(context)                                  .requestFocus(controller.mobileFocus);                            },                            textInputAction: TextInputAction.done,                            keyboardType: TextInputType.name,                            hintText: AppString.address,                            label: AppString.address,                            suffixIcon: IconButton(                                onPressed: () {}, icon: const Icon(Icons.man)),                          ),                          const SizedBox(height: kSmallSize),                          CustomTextField(                            controller: controller.mobileController,                            validator: validateMobile,                            focusNode: controller.mobileFocus,                            onFieldSubmitted: (v) {                              FocusScope.of(context)                                  .requestFocus(controller.passwordFocus);                            },                            textInputAction: TextInputAction.done,                            keyboardType: TextInputType.name,                            hintText: AppString.mobileNumber,                            label: AppString.mobileNumber,                            suffixIcon: IconButton(                                onPressed: () {},                                icon: const Icon(Icons.numbers)),                          ),                          const SizedBox(height: kSmallSize),                          CustomTextField(                            readOnly: true,                            controller: controller.passwordController,                            validator: validate,                            focusNode: controller.passwordFocus,                            onFieldSubmitted: (v) {},                            textInputAction: TextInputAction.next,                            keyboardType: TextInputType.name,                            hintText: AppString.password,                            label: AppString.password,                            suffixIcon: IconButton(                                onPressed: () {},                                icon: const Icon(Icons.location_on)),                          ),                        ],                      ),                      const SizedBox(height: kSmallSize),                      GlobalButton(                          onPress: () {                            controller.updateUserData();                          },                          text: AppString.updateProfile),                    ],                  )),            ),          );        },      ),    );  }}